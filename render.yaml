# ========================================
# 이메일 크롤러 Render 배포 설정 (간단 버전)
# Cron Job만 사용 - 가장 안정적이고 에러 없음
# ========================================

services:
  # 주간 크롤러 (매주 월요일 오전 9시 실행)
  - type: cron
    name: email-crawler-weekly
    runtime: docker
    schedule: "0 9 * * 1"  # 매주 월요일 오전 9시 (UTC) = KST 18시
    dockerfilePath: ./Dockerfile
    dockerContext: .
    dockerCommand: python email_crawler_render.py
    envVars:
      - key: SPREADSHEET_KEY
        sync: false
      - key: GOOGLE_SHEETS_CREDENTIALS
        sync: false
      - key: START_ROW
        value: "2"
      - key: CRAWL_DELAY
        value: "3"
      - key: LOG_LEVEL
        value: "INFO"

# 참고:
# 1. cron 일정 형식: "분 시 일 월 요일"
# 2. Render는 UTC 기준이므로 KST 시간에서 -9시간
#    예: KST 18시 = UTC 9시
# 3. 매일 실행: "0 9 * * *"
# 4. 매주 월요일: "0 9 * * 1"
# 5. 매월 1일: "0 9 1 * *"

# 스케줄 변경 예시:
# - 매일 실행: "0 9 * * *"
# - 매주 월,수,금: "0 9 * * 1,3,5"
# - 매 12시간: "0 */12 * * *"
